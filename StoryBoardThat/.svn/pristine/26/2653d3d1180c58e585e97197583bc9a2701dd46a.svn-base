var UndoManager=function(){var b=[],e=-1,f=false,a;function d(g){if(!g){return}f=true;g.f.apply(g.o,g.p);f=false}function c(m,k,n,l,i,g,j,h){return{undo:{o:m,f:k,p:n,m:l},redo:{o:i,f:g,p:j,m:h}}}return{register:function(m,k,n,l,i,g,j,h){if(f){return}b.splice(e+1,b.length-e);b.push(c(m,k,n,l,i,g,j,h));e=b.length-1;if(a){a()}},setCallback:function(g){a=g},undo:function(){var g=b[e];if(!g){return}d(g.undo);e-=1;if(a){a()}},redo:function(){var g=b[e+1];if(!g){return}d(g.redo);e+=1;if(a){a()}},clear:function(){var g=b.length;b=[];e=-1;if(a&&(g>0)){a()}},hasUndo:function(){return e!==-1},hasRedo:function(){return e<(b.length-1)}}};